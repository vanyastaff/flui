[package]
name = "flui_core"
version.workspace = true
edition.workspace = true
authors = ["FLUI Team"]
license.workspace = true
description = "Typed core for FLUI - Render with compile-time arity constraints"
repository.workspace = true

[dependencies]
# Internal dependencies
flui-foundation = { path = "../flui-foundation" }
flui-pipeline = { path = "../flui-pipeline" }
flui-tree = { path = "../flui-tree" }
flui_types = { path = "../flui_types" }
flui_painting = { path = "../flui_painting" }
flui_rendering = { path = "../flui_rendering" }
flui_interaction = { path = "../flui_interaction" }
flui_engine = { path = "../flui_engine" }
flui_log = { path = "../flui_log" }
flui-scheduler = { path = "../flui-scheduler" }
flui-reactivity = { path = "../flui-reactivity" }

# Essential dependencies
parking_lot.workspace = true
thiserror.workspace = true
tracing.workspace = true
bitflags.workspace = true

# Cache and performance
moka = { workspace = true, features = ["sync"] }

# For element tree
slab = "0.4"

# Optional features
serde = { workspace = true, optional = true }
rayon = { version = "1.10", optional = true }

[dev-dependencies]
criterion.workspace = true
quickcheck = "1.0"

[features]
default = []

# === Async ===
# Async hooks support (use_resource)
async = ["flui-reactivity/async"]

# === Serialization ===
# Serde support for element tree and state
serde = ["dep:serde", "flui_types/serde"]

# === Logging ===
# Pretty hierarchical logging for desktop development
pretty-logs = ["flui_log/pretty"]

# === Profiling ===
# TODO: Add puffin dependency if profiling is needed
# profiling = ["dep:puffin"]

# === Performance ===
# Multi-threaded parallel build pipeline
parallel = ["dep:rayon"]

# === Debug Features ===
# Enable tracing for hot paths (very frequent operations)
trace-hot-paths = []

# === Testing ===
# Auto-create BuildContext in tests when none exists
testing = []

[lib]
name = "flui_core"
path = "src/lib.rs"
