[package]
name = "flui_core"
version.workspace = true
edition.workspace = true
authors = ["FLUI Team"]
license.workspace = true
description = "Typed core for FLUI - Render with compile-time arity constraints"
repository.workspace = true

[dependencies]
# Internal dependencies
flui_types = { path = "../flui_types" }
flui_painting = { path = "../flui_painting" }
flui_engine = { path = "../flui_engine" }
flui_derive = { path = "../flui_derive" }

# Essential dependencies
parking_lot.workspace = true
thiserror.workspace = true
tracing.workspace = true
tracing-subscriber.workspace = true
tracing-tree.workspace = true
smallvec.workspace = true
bitflags.workspace = true
downcast-rs.workspace = true

# Cache and performance
moka = { workspace = true, features = ["sync"] }
ahash.workspace = true

# For element tree
slab = "0.4"

# Optional features
serde = { workspace = true, optional = true }
puffin = { version = "0.19", optional = true }
rayon = { version = "1.10", optional = true }

[dev-dependencies]
criterion.workspace = true

[features]
default = []

# === Serialization ===
# Serde support for element tree and state
serde = ["dep:serde", "flui_types/serde"]

# === Profiling ===
# Performance profiling with puffin
profiling = ["dep:puffin"]

# === Performance ===
# Multi-threaded parallel build pipeline
parallel = ["dep:rayon"]

# === Debug Features ===
# Enable tracing for hot paths (very frequent operations)
trace-hot-paths = []

[lib]
name = "flui_core"
path = "src/lib.rs"

