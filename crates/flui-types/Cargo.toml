[package]
name = "flui-types"
version.workspace = true
edition.workspace = true
authors.workspace = true
license.workspace = true
description = "Core types for Flui framework - geometry, layout, styling"
repository.workspace = true

[dependencies]
tracing = { workspace = true }

# Numeric traits for generic math (Float, Num, etc.)
num-traits = "0.2"

# Error handling
thiserror = "2.0"

# Serialization support (optional)
serde = { workspace = true, optional = true }

# Stack-allocated Vec for small collections (animation curves, color stops)
smallvec = { workspace = true }

# Interoperability with other math libraries (optional)
mint = { version = "0.5", optional = true }

# Direct glam integration (optional)
glam = { version = "0.30", optional = true }

[dev-dependencies]
criterion = { workspace = true }
tokio = { workspace = true, features = ["macros", "rt-multi-thread"] }
proptest = "1.5"
trybuild = "1.0"

[features]
default = []

# === Serialization ===
# Serde support for all types (Color, Size, Rect, etc.)
serde = ["dep:serde"]

# === Performance ===
# SIMD acceleration for math operations
# Auto-detects SSE/AVX (x86_64) or NEON (ARM)
simd = []

# === Interoperability ===
# mint: Zero-cost conversions with glam, nalgebra, cgmath, kurbo
mint = ["dep:mint"]

# glam: Direct integration with glam math library
glam = ["dep:glam"]

# === Convenience ===
# Enable all features
full = ["serde", "simd", "mint"]

# NOTE: Image and font loading moved to flui-assets crate.
# flui_types only provides type definitions!

[[bench]]
name = "geometry_bench"
harness = false

[[bench]]
name = "color_bench"
harness = false

[[bench]]
name = "conversions_bench"
harness = false

[lints.rust]
unsafe_code = "warn"
rust_2018_idioms = "warn"

[lints.clippy]
# Inherit workspace-like base
all = { level = "warn", priority = -1 }
pedantic = { level = "warn", priority = -1 }
# Workspace-level allows
cast_precision_loss = "allow"
module_name_repetitions = "allow"
too_many_lines = "allow"
missing_errors_doc = "allow"
missing_panics_doc = "allow"
must_use_candidate = "allow"
# Math/geometry crate specifics
many_single_char_names = "allow"
cast_possible_truncation = "allow"
cast_sign_loss = "allow"
cast_lossless = "allow"
similar_names = "allow"
# Doc lints â€” will address incrementally
doc_markdown = "allow"
# Geometry code often passes small Copy types by ref for API consistency
needless_pass_by_value = "allow"
trivially_copy_pass_by_ref = "allow"
# Builder-pattern methods returning Self are pervasive
return_self_not_must_use = "allow"
# Float comparisons are intentional in geometry/physics (tolerance-checked elsewhere)
float_cmp = "allow"
# Wildcard imports used in preludes
wildcard_imports = "allow"
