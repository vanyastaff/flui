# –°–∏—Å—Ç–µ–º–∞ –¢–∏–ø–æ–≤ FLUI - –ö—Ä–∞—Ç–∫–∞—è –ü–∞–º—è—Ç–∫–∞

**–î–∞—Ç–∞:** 2026-01-24

---

## –ë—ã—Å—Ç—Ä–∞—è –¢–∞–±–ª–∏—Ü–∞

| –ß—Ç–æ –Ω—É–∂–Ω–æ –æ–ø–∏—Å–∞—Ç—å | –¢–∏–ø | –ü—Ä–∏–º–µ—Ä | –ü–æ—á–µ–º—É |
|-------------------|-----|--------|--------|
| **–ü–æ–∑–∏—Ü–∏—è** (–≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è) | `Offset<Pixels>` | –ö—É—Ä—Å–æ—Ä –º—ã—à–∏, –ø–æ–∑–∏—Ü–∏—è –≤–∏–¥–∂–µ—Ç–∞ | –ê–±—Å–æ–ª—é—Ç–Ω–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ |
| **–î–≤–∏–∂–µ–Ω–∏–µ** (–Ω–∞—Å–∫–æ–ª—å–∫–æ —Å–¥–≤–∏–Ω—É–ª–æ—Å—å) | `Offset<PixelDelta>` | –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ, –¥–≤–∏–∂–µ–Ω–∏–µ –º—ã—à–∏ | –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ |
| **–°–∫–æ—Ä–æ—Å—Ç—å** | `Velocity` | Fling, –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ | –í–Ω—É—Ç—Ä–∏ —É–∂–µ `Offset<Pixels>` (–ø–∏–∫—Å–µ–ª–∏/—Å–µ–∫) |
| **–†–∞–∑–º–µ—Ä** | `Size<Pixels>` | –®–∏—Ä–∏–Ω–∞, –≤—ã—Å–æ—Ç–∞ | –í—Å–µ–≥–¥–∞ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π |
| **–û–±–ª–∞—Å—Ç—å** | `Rect<Pixels>` | Hit test, clip | –ü–æ–∑–∏—Ü–∏—è + —Ä–∞–∑–º–µ—Ä |

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –¢–∏–ø—ã

```rust
// –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –ø–∏–∫—Å–µ–ª–∏ (–¥–ª—è UI)
pub struct Pixels(pub f32);

// –§–∏–∑–∏—á–µ—Å–∫–∏–µ –ø–∏–∫—Å–µ–ª–∏ (–¥–ª—è GPU)
pub struct DevicePixels(pub i32);

// –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ (–ù–ï –∞–±—Å–æ–ª—é—Ç–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è!)
pub struct PixelDelta(pub f32);

// –°–∫–æ—Ä–æ—Å—Ç—å –≤ –ø–∏–∫—Å–µ–ª—è—Ö/—Å–µ–∫—É–Ω–¥—É
pub struct Velocity {
    pub pixels_per_second: Offset<Pixels>,  // –ù–ï Offset<f32>!
}
```

---

## –ì–ª–∞–≤–Ω–æ–µ –ü—Ä–∞–≤–∏–ª–æ

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã –≤ —Å–æ–±—ã—Ç–∏—è—Ö

```rust
pub struct PointerEventData {  // –ë–ï–ó –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤!
    pub position: Offset<Pixels>,      // –ê–±—Å–æ–ª—é—Ç–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
    pub movement: Offset<PixelDelta>,  // –î–µ–ª—å—Ç–∞ –¥–≤–∏–∂–µ–Ω–∏—è
    pub velocity: Velocity,            // –°–∫–æ—Ä–æ—Å—Ç—å
}
```

### ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: –î–∂–µ–Ω–µ—Ä–∏–∫–∏ –≤ —Å–æ–±—ã—Ç–∏—è—Ö

```rust
pub struct PointerEventData<U: Unit> {  // ‚ùå 592 –æ—à–∏–±–∫–∏!
    pub position: Offset<U>,  // –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –Ω–µ –º–æ–∂–µ—Ç –≤—ã–≤–µ—Å—Ç–∏ U
}
```

---

## –ü–æ—á–µ–º—É –ù–µ–ª—å–∑—è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å f32

```rust
// ‚ùå –ü–õ–û–•–û: –ü–æ—Ç–µ—Ä—è–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –µ–¥–∏–Ω–∏—Ü–∞—Ö –∏–∑–º–µ—Ä–µ–Ω–∏—è
let delta = Offset::<f32>::new(5.0, -3.0);  // 5 —á–µ–≥–æ? –ø–∏–∫—Å–µ–ª–µ–π? –º–µ—Ç—Ä–æ–≤?

// ‚úÖ –•–û–†–û–®–û: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å–µ–º–∞–Ω—Ç–∏–∫–∞
let delta = Offset::<PixelDelta>::new(delta_px(5.0), delta_px(-3.0));
```

---

## Pixels vs PixelDelta

**–ö–ª—é—á–µ–≤–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ:** Pixels = **–∞–±—Å–æ–ª—é—Ç–Ω—ã–µ**, PixelDelta = **–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ**

```rust
// –ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∫—É—Ä—Å–æ—Ä (–∞–±—Å–æ–ª—é—Ç–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è)
let cursor = Offset::<Pixels>::new(px(100.0), px(200.0));

// –ù–∞ —Å–∫–æ–ª—å–∫–æ —Å–¥–≤–∏–Ω—É–ª—Å—è –∫—É—Ä—Å–æ—Ä (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ)
let movement = Offset::<PixelDelta>::new(delta_px(5.0), delta_px(-3.0));

// –ù–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è = —Å—Ç–∞—Ä–∞—è –ø–æ–∑–∏—Ü–∏—è + –¥–µ–ª—å—Ç–∞
let new_pos = Offset::<Pixels>::new(
    cursor.dx + movement.dx.to_pixels(),
    cursor.dy + movement.dy.to_pixels(),
);
```

---

## Velocity –ù–ï –±–µ–∑—Ä–∞–∑–º–µ—Ä–Ω–∞—è!

```rust
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –°–∫–æ—Ä–æ—Å—Ç—å –∏–º–µ–µ—Ç –µ–¥–∏–Ω–∏—Ü—ã (–ø–∏–∫—Å–µ–ª–∏/—Å–µ–∫—É–Ω–¥—É)
pub struct Velocity {
    pub pixels_per_second: Offset<Pixels>,  // px/s
}

let vel = Velocity::new(Offset::new(px(100.0), px(50.0)));
// –ó–Ω–∞—á–µ–Ω–∏–µ: 100 px/s –≤–ø—Ä–∞–≤–æ, 50 px/s –≤–Ω–∏–∑

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: f32 –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –µ–¥–∏–Ω–∏—Ü—ã
let bad = Offset::<f32>::new(100.0, 50.0);  // 100 —á–µ–≥–æ –Ω–∞ —á—Ç–æ?
```

---

## –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –Ω–∞ –ì—Ä–∞–Ω–∏—Ü–∞—Ö

### –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ ‚Üí FLUI

```rust
fn handle_winit_event(&mut self, event: WinitEvent) {
    // –°—Ä–∞–∑—É –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –ø–∏–∫—Å–µ–ª–∏
    let logical_pos = Offset {
        dx: Pixels((winit_pos.x / scale) as f32),
        dy: Pixels((winit_pos.y / scale) as f32),
    };
    
    // –°–æ–±—ã—Ç–∏—è —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏
    let event = PointerEventData {
        position: logical_pos,           // Offset<Pixels>
        movement: calc_movement(),       // Offset<PixelDelta>
        velocity: velocity_tracker.estimate(),  // Velocity
    };
}
```

### FLUI ‚Üí GPU

```rust
fn render(&mut self, bounds: Rect<Pixels>) {
    // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –ø–∏–∫—Å–µ–ª–∏ –¥–ª—è GPU
    let device_bounds = bounds.map(|px| px.to_device_pixels(scale));
    self.gpu.draw(device_bounds);
}
```

---

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 592 –û—à–∏–±–æ–∫

### –®–∞–≥ 1: –£–±—Ä–∞—Ç—å –¥–∂–µ–Ω–µ—Ä–∏–∫–∏ –∏–∑ —Å–æ–±—ã—Ç–∏–π

```rust
// –î–û
pub struct PointerEventData<U: Unit> { ... }

// –ü–û–°–õ–ï
pub struct PointerEventData { ... }  // –ë–ï–ó <U>!
```

### –®–∞–≥ 2: –£–±—Ä–∞—Ç—å –¥–∂–µ–Ω–µ—Ä–∏–∫–∏ –∏–∑ –±–∏–Ω–¥–∏–Ω–≥–æ–≤

```rust
// –î–û
pub struct GestureBinding<U: Unit> { ... }

// –ü–û–°–õ–ï
pub struct GestureBinding { ... }  // –ë–ï–ó <U>!
```

### –®–∞–≥ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã

```rust
// –î–û
pub fn handle<U: Unit>(&mut self, event: PointerEventData<U>)

// –ü–û–°–õ–ï
pub fn handle(&mut self, event: PointerEventData)  // –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø!
```

---

## –í—ã–≤–æ–¥

### 3 –ó–æ–ª–æ—Ç—ã—Ö –ü—Ä–∞–≤–∏–ª–∞

1. **–°–æ–±—ã—Ç–∏—è –ë–ï–ó –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤** ‚Üí –ò—Å–ø–æ–ª—å–∑—É–π `Pixels`, `PixelDelta`
2. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ f32 –¥–ª—è –µ–¥–∏–Ω–∏—Ü** ‚Üí –í—Å–µ–≥–¥–∞ newtype –æ–±—ë—Ä—Ç–∫–∏
3. **–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö** ‚Üí Platform ‚Üí `Pixels`, Renderer ‚Üí `DevicePixels`

### –ü–æ–¥—Å–∫–∞–∑–∫–∞ –æ—Ç GPUI

GPUI –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç `Point<T>` –∫–∞–∫ –¥–∂–µ–Ω–µ—Ä–∏–∫, –Ω–æ **–≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `Point<Pixels>`** –≤ API!

–ú—ã –¥–µ–ª–∞–µ–º —Ç–æ –∂–µ —Å–∞–º–æ–µ:
- `Offset<T>` –æ–ø—Ä–µ–¥–µ–ª—ë–Ω –∫–∞–∫ –¥–∂–µ–Ω–µ—Ä–∏–∫ –≤ `flui_types`
- –ù–æ –≤ `flui_interaction` –∏—Å–ø–æ–ª—å–∑—É–µ–º –¢–û–õ–¨–ö–û `Offset<Pixels>` –∏ `Offset<PixelDelta>`
- –ù–∏–∫–∞–∫–∏—Ö –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤ –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö API!

---

**–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é!** üöÄ
